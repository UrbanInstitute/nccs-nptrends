<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Cleaning the Survey Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="02-data-cleaning.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning the Survey Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this chapter we process the raw survey data by:</p>
<ol type="1">
<li>Renaming columns</li>
<li>Recoding response values for quantitative analysis</li>
<li>Dropping duplicates, incomplete responses and test responses</li>
</ol>
<section id="renaming-columns" class="level2">
<h2 class="anchored" data-anchor-id="renaming-columns">Renaming Columns</h2>
<p>Columns referencing survey questions are renamed with the help of a data dictionary to improve readability.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>torename <span class="ot">&lt;-</span> dd <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(vname, vname_raw) <span class="sc">%&gt;%</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>survey_df <span class="ot">&lt;-</span> raw_survey_df <span class="sc">%&gt;%</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_at</span>(<span class="fu">vars</span>(torename<span class="sc">$</span>vname_raw), <span class="sc">~</span>torename<span class="sc">$</span>vname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recoding-survey-responses" class="level2">
<h2 class="anchored" data-anchor-id="recoding-survey-responses">Recoding Survey Responses</h2>
<p>The next step is recoding survey responses. Each group of survey questions comes with its own set of valid inputs that must be recoded separately. For example, “N/A”’s are options for some survey questions and not for others, and some survey questions allow for manual text inputs.</p>
<p>The below code chunk separates all survey questions into their respective categories before further separating each category into numeric, text or NA inputs.</p>
<p>NA questions here refer to “Check here if not applicable to your organization” questions in the survey, where a “C” indicates that the respondent has checked the N/A box.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to get survey questions by group and data type from data dictionary</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>get_survey_questions <span class="ot">&lt;-</span> <span class="cf">function</span>(data_dict, qgroup, qtype){</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  qns <span class="ot">&lt;-</span> data_dict <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(group <span class="sc">==</span> qgroup,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                  type <span class="sc">==</span> qtype) <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">pull</span>(<span class="st">"vname"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(qns)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Changes to Programs and Services</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>program_change_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"ProgChanges"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>program_change_qns_txt <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"ProgChanges"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># People Served</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>people_served_qns_int <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"PeopleServed#1"</span>, <span class="st">"integer"</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>people_served_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"PeopleServed#2"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Demand for future programs and services</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>demand_fct_qns <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Demand"</span>, <span class="st">"factor"</span>) </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Staff and Volunteers</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>staff_qns_int <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Staff#1"</span>, <span class="st">"integer"</span>),</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Staff#2"</span>, <span class="st">"integer"</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>staff_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Staff#3"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>staff_qns_text <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Staff#1"</span>, <span class="st">"text"</span>),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Staff#2"</span>, <span class="st">"text"</span>),</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Staff#3"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Importance of Volunteers and Donors</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>volimportance_qns_fct <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"VolImportance"</span>, <span class="st">"factor"</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>donimportance_qns_fct <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"DonImportance"</span>, <span class="st">"factor"</span>)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Fundraising</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>fundraise_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"FRchanges"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>fundraise_qns_text <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"FRchanges"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Amount for major gifts</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>majorgift_qn_num <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Frmajgift"</span>, <span class="st">"numeric"</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Fundraising Changes</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>fundraise_change_qns_fct <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"FRchanges#1"</span>, <span class="st">"factor"</span>)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of donors</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>fundraise_donor_qns_int <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"FRnumberdonors"</span>, <span class="st">"integer"</span>)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Fundraising Sought and Received</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>fundraise_skrcv_qns_bool <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Funding1#1"</span>, <span class="st">"boolean"</span>),</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"Funding1#2"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Revenue breakdown</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>finance_revenue_qns_num <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Finances"</span>, <span class="st">"numeric"</span>)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>finance_revenue_qns_text <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Finances"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Financial reserves</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>reserve_qns_num <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Reserves"</span>, <span class="st">"numeric"</span>)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>reserve_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"Reserves"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="co"># CARES Funding</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>cares_qns_num <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"CARES"</span>, <span class="st">"numeric"</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>cares_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"CARES"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Changes to finances</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>finance_chng_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"FinanceChanges"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>finance_chng_qns_text <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"FinanceChanges"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Leadership Changes</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>leadership_chng_qns_bool <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"LeadershipChanges"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>leadership_chng_qns_text <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"LeadershipChanges"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Race and Gender Qns</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>race_gender_qns_bool <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"CEOrace"</span>, <span class="st">"boolean"</span>),</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"CEOgender"</span>, <span class="st">"boolean"</span>),</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"BCrace"</span>, <span class="st">"boolean"</span>),</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"BCgender"</span>, <span class="st">"boolean"</span>)</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>race_gender_qns_text <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"CEOrace"</span>, <span class="st">"text"</span>),</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"CEOgender"</span>, <span class="st">"text"</span>),</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"BCrace"</span>, <span class="st">"text"</span>),</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_survey_questions</span>(dd, <span class="st">"BCgender"</span>, <span class="st">"text"</span>)</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a><span class="co"># External affairs questions</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>extaffairs_qns_fct <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"ExternalAffairs"</span>, <span class="st">"factor"</span>)</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Primary concern question</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>primary_cncrn_qn_text <span class="ot">&lt;-</span> <span class="fu">get_survey_questions</span>(dd, <span class="st">"PrimaryConcern"</span>, <span class="st">"text"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="survey-variable-breakdown" class="level3">
<h3 class="anchored" data-anchor-id="survey-variable-breakdown">Survey Variable Breakdown</h3>
<div class="cell">
<ul>
<li><strong>15</strong> questions about changes to programs and services</li>
<li><strong>4</strong> questions about the number of people each organization serves</li>
<li><strong>1</strong> question about overall program demand</li>
<li><strong>27</strong> questions about staff numbers</li>
<li><strong>2</strong> questions about donor and volunteer importance</li>
<li><strong>11</strong> questions about changes to leadership</li>
<li><strong>26</strong> questions about the race and gender of CEOs and Board Chairs.</li>
<li><strong>8</strong> questions about changes to organizational finances</li>
<li><strong>2</strong> questions about CARES Funding</li>
<li><strong>2</strong> questions about financial reserves</li>
<li><strong>9</strong> questions about revenue sources</li>
<li><strong>26</strong> questions about fundraising sources</li>
<li><strong>2</strong> questions about donor types in fundraising</li>
<li><strong>7</strong> questions about fundraising changes</li>
<li><strong>1</strong> questions about major gift amounts</li>
<li><strong>1</strong> questions about future concerns</li>
</ul>
</div>
</section>
<section id="recode-and-relabel-variables" class="level3">
<h3 class="anchored" data-anchor-id="recode-and-relabel-variables">Recode and Relabel Variables</h3>
<p>There are several factor and boolean variables in this survey data set with inconsistent coding. We will recode each category of question individually and document our decision criteria.</p>
<p>Using the memisc package, different types of missingness (e.g.&nbsp;Unsure, N/A, -99 etc.) are coded as missing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to convert survey variable to survey.item with missingness and variable labels</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>create_survey_item <span class="ot">&lt;-</span> <span class="cf">function</span>(survey_data, qns, recode_vals, recode_labs, missing_vals){</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  survey_data <span class="ot">&lt;-</span> survey_data <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">modify_at</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.at =</span> qns,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.f =</span> memisc<span class="sc">::</span>as.item,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">structure</span>(</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">.Data =</span> recode_vals,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">names =</span> recode_labs</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">missing.values =</span> missing_vals</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(survey_data)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="yesno-questions" class="level4">
<h4 class="anchored" data-anchor-id="yesno-questions">Yes/No Questions</h4>
<table class="table">
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Yes</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>No</td>
<td>No</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Unsure</td>
<td>Unsure</td>
<td>97</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>N/A</td>
<td>Not Applicable</td>
<td>98</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>-99</td>
<td>Incomplete</td>
<td>99</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bool_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(program_change_qns_bool, fundraise_qns_bool, cares_qns_bool, finance_chng_qns_bool, leadership_chng_qns_bool)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_df <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(bool_qns),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Yes"</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="st">"No"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="st">"Unsure"</span> <span class="sc">~</span> <span class="dv">97</span>, <span class="st">"N/A"</span> <span class="sc">~</span> <span class="dv">98</span>, <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  bool_qns, </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">97</span>, <span class="dv">98</span>, <span class="dv">99</span>), </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Unsure"</span>, <span class="st">"Not Applicable"</span>, <span class="st">"N/A"</span>), </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">97</span>, <span class="dv">98</span>, <span class="dv">99</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(bool_qns[<span class="dv">1</span>])</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   PrgSrvc_IncrNum

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 97, 98, 99

   Values and labels         N Valid Total
                                          
    0   'No'               305  40.6  37.1
    1   'Yes'              446  59.4  54.3
   97 M 'Unsure'             1         0.1
   98 M 'Not Applicable'     7         0.9
   99 M 'N/A'               11         1.3
   NA M                     52         6.3</code></pre>
</div>
</div>
</section>
<section id="single-checkboxes" class="level4">
<h4 class="anchored" data-anchor-id="single-checkboxes">Single Checkboxes</h4>
<p>These questions are presented as a checkbox to the respondent. They indicate an affirmative answer to the question.</p>
<section id="seek-or-receive-fundraising-questions" class="level5">
<h5 class="anchored" data-anchor-id="seek-or-receive-fundraising-questions">Seek or Receive Fundraising Questions</h5>
<p>These checkboxes are ticked by the respondent to indicate if they have sought or received funding from a specific source.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>(select all that apply)</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>-99</td>
<td>Checkbox Unchecked</td>
<td>No</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(fundraise_skrcv_qns_bool),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"(select all that apply)"</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  fundraise_skrcv_qns_bool, </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>), </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>()</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(fundraise_skrcv_qns_bool[<span class="dv">1</span>])</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   FndRaise_LocGvtGrnt_Seek

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal

   Values and labels     N Valid Total
                                      
    0   'No'           317  46.8  38.6
    1   'Yes'          361  53.2  43.9
   NA M                144        17.5</code></pre>
</div>
</div>
</section>
<section id="race-and-gender-checkboxes" class="level5">
<h5 class="anchored" data-anchor-id="race-and-gender-checkboxes">Race and Gender Checkboxes</h5>
<p>These checkboxes are ticked by the respondent to indicate if their CEO or board chair belong to a specified race or gender identity.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Asian/Pacific Islander</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>Black/African American</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Latinx/Hispanic</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>Native American/American Indian</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>White</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>Man</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Woman</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>Trans</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Gender non-conforming/Non-Binary</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>Other (please specify)</td>
<td>Checkbox Checked</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>0</td>
<td>Checkbox Unchecked</td>
<td>No</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="even">
<td>-99</td>
<td>Incomplete</td>
<td>Incomplete</td>
<td>99</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(race_gender_qns_bool),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Asian/Pacific Islander"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Black/African American"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Latinx/Hispanic"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Native American/American Indian"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"White"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Man"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Woman"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Trans"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Gender non-conforming/Non-Binary"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Other (please specify):"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"0"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  race_gender_qns_bool, </span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">99</span>), </span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(race_gender_qns_bool[<span class="dv">1</span>])</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   CEOrace_AAPI

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99

   Values and labels     N Valid Total
                                      
    0   'No'            48  98.0   5.8
    1   'Yes'            1   2.0   0.1
   99 M 'Incomplete'     2         0.2
   NA M                771        93.8</code></pre>
</div>
</div>
</section>
</section>
<section id="na-checkboxes" class="level4">
<h4 class="anchored" data-anchor-id="na-checkboxes">N/A Checkboxes</h4>
<p>These questions are presented as a checkbox to the user to indicate that a question is not applicable. “Yes” here means “Yes, this question is not applicable”.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C</td>
<td>Yes, this question is not applicable</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>N/A</td>
<td>Yes, this question is not applicable</td>
<td>Yes</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>-99</td>
<td>Incomplete</td>
<td>No</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="even">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>na_bool_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(staff_qns_bool, reserve_qns_bool, people_served_qns_bool)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(na_bool_qns),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"C"</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="st">"N/A"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  na_bool_qns, </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>), </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>()</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(na_bool_qns[<span class="dv">1</span>])</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   Staff_Fulltime_NA

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal

   Values and labels     N Valid Total
                                      
    0   'No'           666  92.2  81.0
    1   'Yes'           56   7.8   6.8
   NA M                100        12.2</code></pre>
</div>
</div>
</section>
<section id="multi-selection-inputs" class="level4">
<h4 class="anchored" data-anchor-id="multi-selection-inputs">Multi-selection Inputs</h4>
<p>These questions offer the user with multiple options to select one from. Since the options are ordered categories, they are coded on an ordinal scale.</p>
<section id="increase---decrease-questions" class="level5">
<h5 class="anchored" data-anchor-id="increase---decrease-questions">Increase - Decrease Questions</h5>
<p>There 2 questions that ask respondents to define changes via an increase or decrease relative to previous years. They are recoded on an ordinal scale.</p>
<section id="changes-in-demand-questions" class="level6">
<h6 class="anchored" data-anchor-id="changes-in-demand-questions">Changes in Demand Questions</h6>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Increase</td>
<td>Increase</td>
<td>Increase</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="even">
<td>Stay the same</td>
<td>Stay the same</td>
<td>Unchanged</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Decrease</td>
<td>Decrease</td>
<td>Decrease</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="even">
<td>-99</td>
<td>Incomplete</td>
<td>No</td>
<td>99</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(demand_fct_qns),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Increase"</span> <span class="sc">~</span> <span class="dv">2</span>, <span class="st">"Stay the same"</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="st">"Decrease"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  demand_fct_qns, </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">99</span>), </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"Increase"</span>, <span class="st">"Unchanged"</span>, <span class="st">"Decrease"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(demand_fct_qns[<span class="dv">1</span>])</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   Dmnd_NxtYear

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99

   Values and labels     N Valid Total
                                      
    0   'Decrease'      19   2.6   2.3
    1   'Unchanged'    154  21.3  18.7
    2   'Increase'     551  76.1  67.0
   99 M 'Incomplete'    10         1.2
   NA M                 88        10.7</code></pre>
</div>
</div>
</section>
<section id="changes-in-fundraising-questions" class="level6">
<h6 class="anchored" data-anchor-id="changes-in-fundraising-questions">Changes in Fundraising Questions</h6>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Increased significantly (by more than 10%)</td>
<td>Largest Increase</td>
<td>Increase Significantly</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="even">
<td>Increased moderately (by less than 10%)</td>
<td>Second Largest Increase</td>
<td>Increase Moderately</td>
<td>4</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Stayed more or less the same</td>
<td>Third Largest Increase</td>
<td>Unchanged</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="even">
<td>Decreased moderately (by less than 10%)</td>
<td>Fourth Largest Increase</td>
<td>Decrease Moderately</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Decreased significantly (by more than 10%)</td>
<td>Fifth Largest Increase</td>
<td>Decrease Significantly</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>Unsure</td>
<td>Unsure</td>
<td>Unsure</td>
<td>99</td>
<td>Missing</td>
</tr>
<tr class="odd">
<td>-99</td>
<td>Incomplete</td>
<td>Incomplete</td>
<td>98</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>N/A</td>
<td>Not Applicable</td>
<td>Not Applicable</td>
<td>97</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(fundraise_change_qns_fct),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Increased significantly (by more than 10%)"</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Increased moderately (by less than 10%)"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Stayed more or less the same"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Decreased moderately (by less than 10%)"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Decreased significantly (by more than 10%)"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Unsure"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">98</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"N/A"</span> <span class="sc">~</span> <span class="dv">97</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  fundraise_change_qns_fct, </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">99</span>, <span class="dv">98</span>, <span class="dv">97</span>), </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"Increase Significantly"</span>, <span class="st">"Increase Moderately"</span>, <span class="st">"Unchanged"</span>, <span class="st">"Decrease Moderately"</span>, <span class="st">"Decrease Significantly"</span>, <span class="st">"Unsure"</span>, <span class="st">"Incomplete"</span>, <span class="st">"Not Applicable"</span>), </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>, <span class="dv">98</span>, <span class="dv">97</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(fundraise_change_qns_fct[<span class="dv">1</span>])</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   FndRaise_Overall_Chng

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99, 98, 97

   Values and labels                 N Valid Total
                                                  
    0   'Unsure'                     0   0.0   0.0
    1   'Decrease Significantly'    80  12.9   9.7
    2   'Decrease Moderately'       77  12.4   9.4
    3   'Unchanged'                161  26.0  19.6
    4   'Increase Moderately'      169  27.3  20.6
    5   'Increase Significantly'   133  21.5  16.2
   97 M 'NA'                         2         0.2
   98 M 'Not Applicable'            33         4.0
   99 M 'Incomplete'                12         1.5
   NA M                            155        18.9</code></pre>
</div>
</div>
<pre><code>dplyr::across(
  tidyselect::all_of(fundraise_change_qns),
  ~ dplyr::recode_factor(.,
                      "Increased significantly (by more than 10%)" = 1,
                      "Increased moderately (by less than 10%)" = 2,
                      "Stayed more or less the same" = 3,
                      "Decreased moderately (by less than 10%)" = 4,
                      "Decreased significantly (by more than 10%)" = 5,
                      "Unsure" = 99,
                      "-99" = -99,
                      "N/A" = 1)    </code></pre>
<p>)</p>
</section>
</section>
<section id="level-of-importance-questions" class="level5">
<h5 class="anchored" data-anchor-id="level-of-importance-questions">Level of Importance Questions</h5>
<p>There are 2 questions that ask respondents to rank the importance of volunteers and donors respectively. However, both sets of options’ are not identical. Hence, they are recoded to common values for reproducibility.</p>
<section id="volunteer-importance" class="level6">
<h6 class="anchored" data-anchor-id="volunteer-importance">Volunteer Importance</h6>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Essential - we depend entirely on volunteers to carry out our mission and goals</td>
<td>Maximum Importance</td>
<td>Essential</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="even">
<td>Very important - we depend on volunteers for a wide range of tasks, but not all</td>
<td>Second Most Important</td>
<td>Very Important</td>
<td>4</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Somewhat important - we depend on volunteers for several key tasks</td>
<td>Third Most Important</td>
<td>Somewhat Important</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="even">
<td>Not very important - we depend on volunteers for only non-essential tasks</td>
<td>Fourth Most Important</td>
<td>Not Very Important</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Not at all important - we could carry out our mission and goals without using volunteers</td>
<td>Fifth Most Important</td>
<td>Not At All Important</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>We do not use volunteers</td>
<td>Sixth Most Important</td>
<td>Not Used</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="odd">
<td>-99</td>
<td>Incomplete</td>
<td>Incomplete</td>
<td>99</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(volimportance_qns_fct),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Essential - we depend entirely on volunteers to carry out our mission and goals"</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Very important - we depend on volunteers for a wide range of tasks, but not all"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Somewhat important - we depend on volunteers for several key tasks"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Not very important - we depend on volunteers for only non-essential tasks"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Not at all important - we could carry out our mission and goals without using volunteers"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"We do not use volunteers"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  survey_recode_df,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  volimportance_qns_fct, </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">99</span>), </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"Essential"</span>, <span class="st">"Very Important"</span>, <span class="st">"Somewhat Important"</span>, <span class="st">"Not Very Important"</span>, <span class="st">"Not At All Important"</span>, <span class="st">"Not Used"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(volimportance_qns_fct[<span class="dv">1</span>])</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   VolImportance

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99

   Values and labels               N Valid Total
                                                
    0   'Not Used'                46   6.4   5.6
    1   'Not At All Important'    41   5.7   5.0
    2   'Not Very Important'      80  11.2   9.7
    3   'Somewhat Important'     196  27.5  23.8
    4   'Very Important'         209  29.3  25.4
    5   'Essential'              142  19.9  17.3
   99 M 'Incomplete'               6         0.7
   NA M                          102        12.4</code></pre>
</div>
</div>
</section>
<section id="donor-importance" class="level6">
<h6 class="anchored" data-anchor-id="donor-importance">Donor Importance</h6>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Essential, we depend entirely on individual donations to carry out our mission and goals</td>
<td>Maximum Importance</td>
<td>Essential</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="even">
<td>Very important, we depend on individual donations for a wide range of activities, but not all</td>
<td>Very Important</td>
<td>4</td>
<td>No</td>
<td></td>
</tr>
<tr class="odd">
<td>Important, we depend on individual donations for several key activities</td>
<td>Third Most Important</td>
<td>Somewhat Important</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="even">
<td>Not very important, we depend on individual donations for only non-essential activities</td>
<td>Fourth Most Important</td>
<td>Not Very Important</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Not at all important, we could carry out our mission and goals without donations from individuals</td>
<td>Fifth Most Important</td>
<td>Not At All Important</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>We do not receive donations from individuals</td>
<td>Sixth Most Important</td>
<td>Not Used</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="odd">
<td>-99</td>
<td>Incomplete</td>
<td>Incomplete</td>
<td>99</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(donimportance_qns_fct),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Essential, we depend entirely on individual donations to carry out our mission and goals"</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Very important, we depend on individual donations for a wide range of activities, but not all"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Important, we depend on individual donations for several key activities"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Not very important, we depend on individual donations for only non-essential activities"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Not at all important, we could carry out our mission and goals without donations from individuals"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"We do not receive donations from individuals"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  survey_recode_df,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  donimportance_qns_fct, </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">99</span>), </span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"Essential"</span>, <span class="st">"Very Important"</span>, <span class="st">"Somewhat Important"</span>, <span class="st">"Not Very Important"</span>, <span class="st">"Not At All Important"</span>, <span class="st">"Not Used"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(donimportance_qns_fct[<span class="dv">1</span>])</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   DonImportance

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99

   Values and labels               N Valid Total
                                                
    0   'Not Used'                18   2.5   2.2
    1   'Not At All Important'    24   3.4   2.9
    2   'Not Very Important'      59   8.3   7.2
    3   'Somewhat Important'     137  19.3  16.7
    4   'Very Important'         298  41.9  36.3
    5   'Essential'              175  24.6  21.3
   99 M 'Incomplete'               7         0.9
   NA M                          104        12.7</code></pre>
</div>
</div>
</section>
</section>
<section id="frequency-questions" class="level5">
<h5 class="anchored" data-anchor-id="frequency-questions">Frequency Questions</h5>
<p>These questions ask respondents to rank the frequency at which they engage in an activity.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Frequently</td>
<td>Most Frequent</td>
<td>Frequently</td>
<td>4</td>
<td>No</td>
</tr>
<tr class="even">
<td>Almost all the time</td>
<td>Second Most Frequent</td>
<td>More Often Than Not</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Occasionally</td>
<td>Third Most Frequent</td>
<td>Occasionally</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="even">
<td>Rarely</td>
<td>Fourth Most Frequent</td>
<td>Rarely</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Never</td>
<td>Fifth Most Frequent</td>
<td>Occasionally</td>
<td>0</td>
<td>No</td>
</tr>
<tr class="even">
<td>-99</td>
<td>Incomplete</td>
<td>Incomplete</td>
<td>99</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(extaffairs_qns_fct),</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Frequently"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Almost all the time"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Occasionally"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Rarely"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Never"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="dv">99</span>,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="cn">NA</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  survey_recode_df,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  extaffairs_qns_fct, </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">99</span>), </span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"Frequently"</span>, <span class="st">"More Often than Not"</span>, <span class="st">"Occasionally"</span>, <span class="st">"Rarely"</span>, <span class="st">"Never"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(extaffairs_qns_fct[<span class="dv">1</span>])</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   ExtAffairs_GenEd

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99

   Values and labels              N Valid Total
                                               
    0   'Never'                 167  29.0  20.3
    1   'Rarely'                 98  17.0  11.9
    2   'Occasionally'          149  25.9  18.1
    3   'More Often than Not'    45   7.8   5.5
    4   'Frequently'            116  20.2  14.1
   99 M 'Incomplete'             10         1.2
   NA M                         237        28.8</code></pre>
</div>
</div>
</section>
</section>
<section id="integer-inputs" class="level4">
<h4 class="anchored" data-anchor-id="integer-inputs">Integer Inputs</h4>
<p>These questions accept an integer input from users to indicate the number of staff they have, people they served, or donors they have.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Whole Number</td>
<td>Number of Staff, People or Donors</td>
<td>NA</td>
<td>Integer Value</td>
<td>No</td>
</tr>
<tr class="even">
<td>N/A</td>
<td>Not Applicable</td>
<td>NA</td>
<td>-1</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>-99</td>
<td>Incomplete</td>
<td>NA</td>
<td>-2</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>int_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(staff_qns_int, people_served_qns_int, fundraise_donor_qns_int)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(int_qns),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"N/A"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span>,<span class="st">"-99"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">2</span>, <span class="cn">NA</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="fu">as.integer</span>(.))</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  survey_recode_df,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  int_qns, </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(), </span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(), </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in structure(.Data = recode_vals, names = recode_labs): Calling 'structure(NULL, *)' is deprecated, as NULL cannot have attributes.
  Consider 'structure(list(), *)' instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(int_qns[<span class="dv">1</span>])</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   Staff_Fulltime_2021

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: interval
   Missing values: -1, -2

   Values                  N Percent
                                    
      M (unlab.mss.)      67     8.2
   NA M                  100    12.2
                                    
        Min:    0.000               
        Max: 3000.000               
       Mean:   16.783               
   Std.Dev.:  120.028               </code></pre>
</div>
</div>
</section>
<section id="numeric-inputs" class="level4">
<h4 class="anchored" data-anchor-id="numeric-inputs">Numeric Inputs</h4>
<p>These questions accept a numeric input from users to denote dollar values. For some variables, additional processing is done to remove commas and “$” signs.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Dollar Amount</td>
<td>Dollar Amount</td>
<td>NA</td>
<td>Numeric Value</td>
<td>No</td>
</tr>
<tr class="even">
<td>-99</td>
<td>Incomplete</td>
<td>NA</td>
<td>-1</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>NA</td>
<td>Unanswered</td>
<td>NA</td>
<td>NA</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>numeric_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(majorgift_qn_num, reserve_qns_num, cares_qns_num, finance_revenue_qns_num)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">CARES_Rcv_Est =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(CARES_Rcv_Est, <span class="st">","</span>, <span class="st">""</span>),</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">CARES_Rcv_Est =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(CARES_Rcv_Est, <span class="st">" "</span>, <span class="st">""</span>),</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">CARES_Rcv_Est =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(CARES_Rcv_Est, <span class="st">"</span><span class="sc">\\</span><span class="st">$"</span>, <span class="st">""</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(numeric_qns),</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="fu">as.numeric</span>(.))</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  survey_recode_df,</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  numeric_qns, </span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(), </span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(), </span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(numeric_qns[<span class="dv">1</span>])</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   FndRaise_MajGift_Amt

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: interval
   Missing values: -1

   Values                  N Percent
                                    
      M (unlab.mss.)      18     2.2
   NA M                  156    19.0
                                    
        Min:       0.010            
        Max: 1000000.000            
       Mean:    5935.894            
   Std.Dev.:   44801.714            </code></pre>
</div>
</div>
</section>
<section id="text-inputs" class="level4">
<h4 class="anchored" data-anchor-id="text-inputs">Text Inputs</h4>
<p>These questions allow the user to enter raw text as answers. All non-text values are converted to NAs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>text_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(staff_qns_text, finance_chng_qns_text, finance_revenue_qns_text, fundraise_qns_text, leadership_chng_qns_text, primary_cncrn_qn_text, program_change_qns_txt, race_gender_qns_text)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">all_of</span>(text_qns),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(.,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"-99"</span> <span class="sc">~</span> <span class="cn">NA</span>, <span class="cn">NA</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.default =</span> <span class="fu">as.character</span>(.))</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">all_of</span>(text_qns[<span class="dv">1</span>])</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   Staff_Other_Text_2021

--------------------------------------------------------------------------------

   Storage mode: character

   Valid and missing values       N Percent
                                           
   Valid                         42     5.1
   Missing (NA)                 780    94.9
   Total                        822        
                                           
   Min:                   "Accountant"     
   Max: "website and graphic designer"     </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="adding-race-and-gender-answers-from-year-1-survey" class="level2">
<h2 class="anchored" data-anchor-id="adding-race-and-gender-answers-from-year-1-survey">Adding Race and Gender Answers from Year 1 Survey</h2>
<p>Questions about the race and gender of CEOs and Board Chairs are only presented to users if they indicate that a leadership change has occurred in Year 2 of the survey. Hence, we will need to impute in race and gender responses for participants who did not indicate a change in leadership.</p>
<section id="identifying-cases-for-imputation" class="level3">
<h3 class="anchored" data-anchor-id="identifying-cases-for-imputation">Identifying cases for imputation</h3>
<p>These respondents indicate that there were no changes to their CEO in year 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>no_ceo_chng_ein <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span> (LeadershipChng_HireCEO <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> LeadershipChng_IntrmCEO <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(<span class="st">"EIN"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>no_bchair_chng_ein <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    LeadershipChng_ChngBC <span class="sc">!=</span> <span class="dv">1</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(<span class="st">"EIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="processing-year-1-data" class="level3">
<h3 class="anchored" data-anchor-id="processing-year-1-data">Processing Year 1 Data</h3>
<p>In Year 1, the survey questions for race and gender are encoded in a single factor variable instead of the multiple boolean variables in Year 2. We will have to wrangle the data from Year 1 into a format for Year 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrangle Data for Year 1 Responses on CEO race and Gender</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>year1_CEOchng <span class="ot">&lt;-</span> year1_raw <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(EIN, CEOrace, CEOgender) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(EIN <span class="sc">%in%</span> no_ceo_chng_ein,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">!</span> CEOrace <span class="sc">%in%</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA</span>),</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">!</span> CEOgender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">CEOrace =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>      CEOrace,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"AAPI"</span>, <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Black"</span>, <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Hisp"</span>, <span class="dv">4</span> <span class="sc">~</span> <span class="st">"NativeAm"</span>, <span class="dv">5</span> <span class="sc">~</span> <span class="st">"White"</span>, <span class="dv">6</span> <span class="sc">~</span> <span class="st">"Bi"</span>, <span class="dv">7</span> <span class="sc">~</span> <span class="st">"Oth"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">"Oth"</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">CEOgender =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>      CEOgender,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Man"</span>, <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Woman"</span>, <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Trans"</span>, <span class="dv">4</span> <span class="sc">~</span> <span class="st">"NB"</span>, <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Oth"</span>,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">"Oth"</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">race_check =</span> <span class="dv">1</span>,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender_check =</span> <span class="dv">1</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> CEOrace,</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_glue =</span> <span class="st">"CEOrace_{CEOrace}"</span>,</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> race_check, </span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> CEOgender,</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_glue =</span> <span class="st">"CEOgender_{CEOgender}"</span>,</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> gender_check, </span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrangle Data for Year 1 Responses on Board Chair Race and Gender</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>year1_BCchng <span class="ot">&lt;-</span> year1_raw <span class="sc">%&gt;%</span> </span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(EIN, BCrace, BCgender) <span class="sc">%&gt;%</span> </span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(EIN <span class="sc">%in%</span> no_bchair_chng_ein,</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>                <span class="sc">!</span> BCrace <span class="sc">%in%</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA</span>),</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>                <span class="sc">!</span> BCgender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">BCrace =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>      BCrace,</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"AAPI"</span>, <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Black"</span>, <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Hisp"</span>, <span class="dv">4</span> <span class="sc">~</span> <span class="st">"NativeAm"</span>, <span class="dv">5</span> <span class="sc">~</span> <span class="st">"White"</span>, <span class="dv">6</span> <span class="sc">~</span> <span class="st">"Bi"</span>, <span class="dv">7</span> <span class="sc">~</span> <span class="st">"Oth"</span>,</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">"Oth"</span></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">BCgender =</span> dplyr<span class="sc">::</span><span class="fu">case_match</span>(</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>      BCgender,</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Man"</span>, <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Woman"</span>, <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Trans"</span>, <span class="dv">4</span> <span class="sc">~</span> <span class="st">"NB"</span>, <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Oth"</span>,</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">"Oth"</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">race_check =</span> <span class="dv">1</span>,</span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender_check =</span> <span class="dv">1</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> BCrace,</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_glue =</span> <span class="st">"BChairrace_{BCrace}"</span>,</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> race_check, </span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> BCgender,</span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_glue =</span> <span class="st">"BChairgender_{BCgender}"</span>,</span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> gender_check, </span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fill =</span> <span class="dv">0</span></span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-biracial-categories-in-year-2" class="level3">
<h3 class="anchored" data-anchor-id="create-biracial-categories-in-year-2">Create Biracial Categories in Year 2</h3>
<p>Since the Year 1 data has an indicator for biracial CEOs and Board Chairs, we will have to create a boolean Biracial indicator variable in the Year 2 data that returns a 1 if a CEO or Board Chair belongs to 2 or more racial groups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>race_ceo_qns_bool <span class="ot">&lt;-</span> race_gender_qns_bool[<span class="fu">grepl</span>(<span class="st">"CEOrace"</span>, race_gender_qns_bool)]</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>race_bchair_qns_bool <span class="ot">&lt;-</span> race_gender_qns_bool[<span class="fu">grepl</span>(<span class="st">"BChairrace"</span>, race_gender_qns_bool)]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">CEOrace_Bi =</span> <span class="fu">ifelse</span>(dplyr<span class="sc">::</span><span class="fu">between</span>(</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sum</span>(dplyr<span class="sc">::</span><span class="fu">c_across</span>(tidyselect<span class="sc">::</span><span class="fu">all_of</span>(race_ceo_qns_bool)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>, <span class="dv">6</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">BChairrace_Bi =</span> <span class="fu">ifelse</span>(dplyr<span class="sc">::</span><span class="fu">between</span>(</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sum</span>(dplyr<span class="sc">::</span><span class="fu">c_across</span>(tidyselect<span class="sc">::</span><span class="fu">all_of</span>(race_bchair_qns_bool)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>, <span class="dv">6</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    ), <span class="dv">1</span>, <span class="dv">0</span>)  </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="merge-year-1-race-and-gender-variables-with-year-2" class="level3">
<h3 class="anchored" data-anchor-id="merge-year-1-race-and-gender-variables-with-year-2">Merge Year 1 Race and Gender Variables with Year 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>race_ceo_qns_bool <span class="ot">&lt;-</span> <span class="fu">c</span>(race_ceo_qns_bool, <span class="st">"CEOrace_Bi"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (race_var <span class="cf">in</span> race_ceo_qns_bool){</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!!</span> <span class="at">race_var :=</span> <span class="fu">ifelse</span>(</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    EIN <span class="sc">%in%</span> year1_CEOchng<span class="sc">$</span>EIN, </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    year1_CEOchng[[race_var]], </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    .data[[race_var]]</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>gender_ceo_qns_bool <span class="ot">&lt;-</span> race_gender_qns_bool[<span class="fu">grepl</span>(<span class="st">"CEOgender"</span>, race_gender_qns_bool)]</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (gender_var <span class="cf">in</span> gender_ceo_qns_bool){</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!!</span> <span class="at">gender_var :=</span> <span class="fu">ifelse</span>(</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    EIN <span class="sc">%in%</span> year1_CEOchng<span class="sc">$</span>EIN <span class="sc">&amp;</span> gender_var <span class="sc">%in%</span> <span class="fu">names</span>(year1_CEOchng), </span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    year1_CEOchng[[gender_var]], </span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>    .data[[gender_var]]</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>race_bchair_qns_bool <span class="ot">&lt;-</span> <span class="fu">c</span>(race_bchair_qns_bool, <span class="st">"BChairrace_Bi"</span>)</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (race_var <span class="cf">in</span> race_bchair_qns_bool){</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!!</span> <span class="at">race_var :=</span> <span class="fu">ifelse</span>(</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>    EIN <span class="sc">%in%</span> year1_BCchng<span class="sc">$</span>EIN, </span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    year1_BCchng[[race_var]], </span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>    .data[[race_var]]</span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>gender_bchair_qns_bool <span class="ot">&lt;-</span> race_gender_qns_bool[<span class="fu">grepl</span>(<span class="st">"BChairgender"</span>, race_gender_qns_bool)]</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (gender_var <span class="cf">in</span> gender_bchair_qns_bool){</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!!</span> <span class="at">gender_var :=</span> <span class="fu">ifelse</span>(</span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>    EIN <span class="sc">%in%</span> year1_BCchng<span class="sc">$</span>EIN <span class="sc">&amp;</span> gender_var <span class="sc">%in%</span> <span class="fu">names</span>(year1_BCchng), </span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>    year1_BCchng[[gender_var]], </span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>    .data[[gender_var]]</span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recode-new-race-and-gender-variables" class="level3">
<h3 class="anchored" data-anchor-id="recode-new-race-and-gender-variables">Recode New Race and Gender Variables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  race_ceo_qns_bool, </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">99</span>), </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  gender_ceo_qns_bool, </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">99</span>), </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  race_bchair_qns_bool, </span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">99</span>), </span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>  gender_bchair_qns_bool, </span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">99</span>), </span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Incomplete"</span>), </span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>(<span class="dv">99</span>)</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-single-racegender-column" class="level3">
<h3 class="anchored" data-anchor-id="create-single-racegender-column">Create single Race/Gender column</h3>
<p>While our race and gender columns are individual binary columns, this is not the case for year 1 and 3 results. Both those years contain single columns for race and gender variables for CEOs and Board Chairs respectively. For easier comparability, we create a new variable aggregating race and gender values for all our individual binary columns.</p>
<section id="aggregated-race-variable" class="level4">
<h4 class="anchored" data-anchor-id="aggregated-race-variable">Aggregated Race Variable</h4>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Original Value</th>
<th>Description</th>
<th>Recode Label</th>
<th>Recode Value</th>
<th>Missing ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Asian/Pacific Islander</td>
<td>AAPI</td>
<td>1</td>
<td>No</td>
</tr>
<tr class="even">
<td>1</td>
<td>Black/African American</td>
<td>Black</td>
<td>2</td>
<td>No</td>
</tr>
<tr class="odd">
<td>1</td>
<td>Latinx/Hispanic</td>
<td>Hisp</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="even">
<td>1</td>
<td>Native American/American Indian</td>
<td>NativeAm</td>
<td>4</td>
<td>No</td>
</tr>
<tr class="odd">
<td>1</td>
<td>White</td>
<td>White</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="even">
<td>1</td>
<td>Bi/Multi-racial</td>
<td>Bi</td>
<td>6</td>
<td>No</td>
</tr>
<tr class="odd">
<td>1</td>
<td>Other (please specify)</td>
<td>Oth</td>
<td>7</td>
<td>No</td>
</tr>
<tr class="even">
<td>0</td>
<td>Checkbox Unchecked</td>
<td>NA</td>
<td>Yes</td>
<td></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create New Race variables</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">CEOrace =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>      CEOrace_AAPI <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>      CEOrace_Black <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>      CEOrace_Hisp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>      CEOrace_NativeAm <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>      CEOrace_White <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>      CEOrace_Bi <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>      CEOrace_Oth <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="cn">NA</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">BChairrace =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>      BChairrace_AAPI <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>      BChairrace_Black <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>      BChairrace_Hisp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>      BChairrace_NativeAm <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>      BChairrace_White <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>      BChairrace_Bi <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>      BChairrace_Oth <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">7</span>,</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="cn">NA</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Survey Item</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"CEOrace"</span>, <span class="st">"BChairrace"</span>), </span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>), </span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"AAPI"</span>, <span class="st">"Black"</span>, <span class="st">"Hisp"</span>, <span class="st">"NativeAm"</span>, <span class="st">"White"</span>, <span class="st">"Bi"</span>, <span class="st">"Oth"</span>), </span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>()</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="aggregated-gender-variable" class="level4">
<h4 class="anchored" data-anchor-id="aggregated-gender-variable">Aggregated Gender Variable</h4>
<p>Original Value | Description | Recode Label | Recode Value | Missing ? |</p>
<p>|1|Man|Man|1|No| |1|Woman|Woman|2|No| |1|Trans|Trans|3|No| |1|Gender non-conforming/Non-Binary|NB|4|No| |1|Other (please specify)|Oth|5|No| |0|Checkbox Unchecked|NA|Yes|</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create New Race variables</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">CEOgender =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>      CEOgender_Man <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>      CEOgender_Woman <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>      CEOgender_Trans <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>      CEOgender_NB <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>      CEOgender_Oth <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="cn">NA</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">BChairgender =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>      BChairgender_Man <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>      BChairgender_Woman <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>      BChairgender_Trans <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>      BChairgender_NB <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>      BChairgender_Oth <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="cn">NA</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Survey Item</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>survey_recode_df <span class="ot">&lt;-</span> <span class="fu">create_survey_item</span>(</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  survey_recode_df, </span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"CEOgender"</span>, <span class="st">"BChairgender"</span>), </span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_vals =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), </span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">recode_labs =</span> <span class="fu">c</span>(<span class="st">"Man"</span>, <span class="st">"Woman"</span>, <span class="st">"Trans"</span>, <span class="st">"NB"</span>, <span class="st">"Oth"</span>), </span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_vals =</span> <span class="fu">c</span>()</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="validate-results" class="level3">
<h3 class="anchored" data-anchor-id="validate-results">Validate Results</h3>
<p>We can see that the number of valid responses for race and gender questions concerning the CEO and Board Chair have increased.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>race_gender_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(race_gender_qns_bool, <span class="st">"CEOrace"</span>, <span class="st">"CEOgender"</span>, <span class="st">"BChairrace"</span>,<span class="st">"BChairgender"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">codebook</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(tidyselect<span class="sc">::</span><span class="fu">all_of</span>(race_gender_qns[<span class="dv">1</span>]))</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================

   CEOrace_AAPI

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 99

   Values and labels     N Valid Total
                                      
    0   'No'           467  99.8  56.8
    1   'Yes'            1   0.2   0.1
   99 M 'Incomplete'     2         0.2
   NA M                352        42.8</code></pre>
</div>
</div>
</section>
</section>
<section id="evaluating-survey-completion-rates-and-summing-section-completion" class="level2">
<h2 class="anchored" data-anchor-id="evaluating-survey-completion-rates-and-summing-section-completion">Evaluating Survey Completion Rates and Summing Section Completion</h2>
<p>We next evaluate survey completion rates for each category of questions. We separate our variables into question categories and compute the proportion of valid responses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create named list of variables</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>survey_completion_qns_ls <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Program Changes"</span> <span class="ot">=</span> program_change_qns_bool,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"People Served"</span> <span class="ot">=</span> people_served_qns_int,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Next Year's Demand"</span> <span class="ot">=</span> demand_fct_qns,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Staff &amp; Volunteers"</span> <span class="ot">=</span> staff_qns_int,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Volunteer Importance"</span> <span class="ot">=</span> volimportance_qns_fct,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Donor Importance"</span> <span class="ot">=</span> donimportance_qns_fct,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fundraising"</span> <span class="ot">=</span> fundraise_qns_bool,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Major Gift Amount"</span> <span class="ot">=</span> majorgift_qn_num,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fundraising Changes"</span> <span class="ot">=</span> fundraise_change_qns_fct,</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Donor Changes"</span> <span class="ot">=</span> fundraise_donor_qns_int,</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fundraising Sought/Received"</span> <span class="ot">=</span> fundraise_skrcv_qns_bool,</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Revenue Breakdown"</span> <span class="ot">=</span> finance_revenue_qns_num,</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Reserves"</span> <span class="ot">=</span> reserve_qns_num,</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CARES Funding"</span> <span class="ot">=</span> cares_qns_num,</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Finance Changes"</span> <span class="ot">=</span> finance_chng_qns_bool,</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Leadership Changes"</span> <span class="ot">=</span> leadership_chng_qns_bool,</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Race and Gender"</span> <span class="ot">=</span> <span class="fu">c</span>(race_gender_qns_bool, <span class="st">"BChairrace_Bi"</span>, <span class="st">"CEOrace_Bi"</span>),</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"External Affairs"</span> <span class="ot">=</span> extaffairs_qns_fct,</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Primary Concern"</span> <span class="ot">=</span> primary_cncrn_qn_text)</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Include Response IDs into questions</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>survey_completion_qns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ResponseId"</span>, <span class="fu">unname</span>(<span class="fu">unlist</span>(survey_completion_qns_ls)))</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset Survey to only include questions to calculate response rates</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>survey_subset <span class="ot">&lt;-</span> survey_recode_df <span class="sc">%&gt;%</span> </span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>    tidyselect<span class="sc">::</span><span class="fu">all_of</span>(survey_completion_qns)</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute response rate</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>response_rate_ls <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">imap</span>(</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">.x =</span> survey_completion_qns_ls,</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">.f =</span> <span class="cf">function</span>(qns, qn_group) {</span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute responses for each question belonging to a group</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>    sum_ls <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(qns,</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>           <span class="at">.f =</span> <span class="cf">function</span>(qn){</span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a>             rs <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(survey_subset[[qn]])</span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>             rs <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="sc">!</span> <span class="fu">is.na</span>(rs), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a>             <span class="fu">return</span>(rs)</span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>           })</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform rowwise sum for questions belonging to a group to get number of valid responses</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>    sum_qn <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">pmap</span>(sum_ls, sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>    survey_subset[[qn_group]] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(sum_qn)</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute response rate based on number of questions in that group</span></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>    output_df <span class="ot">&lt;-</span> survey_subset <span class="sc">%&gt;%</span> </span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">qn_group :=</span> .data[[qn_group]] <span class="sc">/</span> <span class="fu">length</span>(qns)) <span class="sc">%&gt;%</span> </span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(tidyselect<span class="sc">::</span><span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">"ResponseId"</span>, qn_group)))</span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(output_df)</span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">.progress =</span> <span class="cn">TRUE</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a>response_rate_df <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(response_rate_ls,</span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a>                                  dplyr<span class="sc">::</span>left_join,</span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">by =</span> <span class="st">"ResponseId"</span>)</span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude Qualtrics Test Responses</span></span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a>testcases <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_1lB6u4BoFZWFeXI"</span>,</span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_3e3RyQttJeNzqLu"</span>,</span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_3kzeIxsE73IIoq9"</span>,</span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_2BxNQBmrv4Dr9Dn"</span>,</span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_Q4WjxQdBfeZbn4B"</span>,</span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_xFNLuOjPbg6iL6N"</span>,</span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_3McyCOS2Gv7FNcd"</span>,</span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_9YWW00fssFUBEYh"</span>,</span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_PNiTwNoQSfvuRkB"</span>,</span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_111PYLkD7mpeFui"</span>,</span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_a59rvIufWBZhAhr"</span>,</span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_3MGb8by31yzxYW7"</span>,</span>
<span id="cb40-71"><a href="#cb40-71" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_1exbPd4NNpfWrFt"</span>,</span>
<span id="cb40-72"><a href="#cb40-72" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_2PwfUW9idAwPE1w"</span>,</span>
<span id="cb40-73"><a href="#cb40-73" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_3EunbLVD5Ce8b93"</span>,</span>
<span id="cb40-74"><a href="#cb40-74" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_2uO55NoBulnQTvx"</span>,</span>
<span id="cb40-75"><a href="#cb40-75" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_Wl2yqsO0HXhhaTv"</span>,</span>
<span id="cb40-76"><a href="#cb40-76" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_1kSRidkXneLKy4u"</span>,</span>
<span id="cb40-77"><a href="#cb40-77" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R_3j3DCg6oVhQWRe0"</span></span>
<span id="cb40-78"><a href="#cb40-78" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-79"><a href="#cb40-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-80"><a href="#cb40-80" aria-hidden="true" tabindex="-1"></a>response_rate_df <span class="ot">&lt;-</span> response_rate_df <span class="sc">%&gt;%</span> </span>
<span id="cb40-81"><a href="#cb40-81" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span> ResponseId <span class="sc">%in%</span> weighted_survey_df<span class="sc">$</span>ResponseId)</span>
<span id="cb40-82"><a href="#cb40-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-83"><a href="#cb40-83" aria-hidden="true" tabindex="-1"></a>response_rate_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="save-outputs" class="level2">
<h2 class="anchored" data-anchor-id="save-outputs">Save outputs</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"Y:/CNP/Generosity Commission/"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(survey_recode_df,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"DATA-PREP/02-data-intermediate/02-wave-two/wave-02-data-intermediate-recoded.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>